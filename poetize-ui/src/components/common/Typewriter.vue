<template>
  <div class="tprinter">
    <p>
      <strong id="colortap1">/</strong>
    </p>
<!--    <p>{{ wtext }}</p>-->
  </div>
</template>

<script>
export default {
  data() {
    return {
      wtext: '',
      index: 0,
      timer: null, // 添加定时器类型注解
    };
  },
  mounted() {
    //this.fetchData();

    var colortap = function (r) {
      //fetchDataAndUpdateText();
      // setInterval(() => {
      //    fetchDataAndUpdateText();
      // }, 2000); // 每2秒更新一次数据
      function t() {return b[Math.floor(Math.random() * b.length)]}
      function e() {return String.fromCharCode(94 * Math.random() + 33)}
      function n(r) {
        for(var n=document.createDocumentFragment(),i=0;r>i;i++){
          var l=document.createElement("span");
          l.textContent=e(),l.style.color=t(),n.appendChild(l)
        }
        return n;
      }

      // AJAX 请求接口获取数据
      function fetchDataAndUpdateText() {
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'https://api.mu-jie.cc/stray-birds/range', true);
        xhr.onreadystatechange = function() {
          if (xhr.readyState === XMLHttpRequest.DONE) {
            if (xhr.status === 200) {
              const data = JSON.parse(xhr.responseText);
              replaceText(data);
             console.log(data);
            } else {
              console.error('发生错误:', xhr.status);
            }
          }
        };
        xhr.send();
      }

      function i() {
        var totalSkills = o.length;
        var t = o[c.skillI];

        c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % totalSkills, c.direction = "forward")),
          r.textContent = c.text,
          r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))),
          setTimeout(i, d)
        // var t = o[c.skillI];
        // c.step ? c.step-- : (c.step = g, c.prefixP < l.length ? (c.prefixP >= 0 && (c.text += l[c.prefixP]), c.prefixP++) : "forward" === c.direction ? c.skillP < t.length ? (c.text += t[c.skillP], c.skillP++) : c.delay ? c.delay-- : (c.direction = "backward", c.delay = a) : c.skillP > 0 ? (c.text = c.text.slice(0, -1), c.skillP--) : (c.skillI = (c.skillI + 1) % o.length, c.direction = "forward")),
        //   r.textContent = c.text,
        //   r.appendChild(n(c.prefixP < l.length ? Math.min(s, s + c.prefixP) : Math.min(s, t.length - c.skillP))),
        //   setTimeout(i, d)
      }
      //fetchDataAndUpdateText(); // 初始获取一次数据
      //i();
      var l = "",
          o = [
          "雨打梨花深闭门，忘了青春，误了青春。",
          "赏心乐事共谁论？花下销魂，月下销魂。",
          "愁聚眉峰尽日颦，千点啼痕，万点啼痕。",
          "晓看天色暮看云，行也思君，坐也思君。",
          "春赏百花冬观雪，醒亦念卿，梦亦念卿。",
          "山有木兮木有枝。心说君兮君不知。",
          "彼采葛兮，一日不见，如三月兮！",
          "彼采萧兮，一日不见，如三秋兮！",
          "彼采艾兮！一日不见，如三岁兮！",
          "在天愿作比翼鸟，在地愿为连理枝。",
          "天长地久有时尽，此恨绵绵无绝期。",
          "山无陵，江水为竭，冬雷震震，",
          "夏雨雪，天地合，乃敢与君绝！",
          "明月几时有？把酒问青天。",
          "不知天上宫阙，今夕是何年。",
          "我欲乘风归去，又恐琼楼玉宇，高处不胜寒。",
          "起舞弄清影，何似在人间。",
          "转朱阁，低绮户，照无眠。",
          "不应有恨，何事长向别时圆？",
          "人有悲欢离合，月有阴晴圆缺，此事古难全。",
          "但愿人长久，千里共婵娟。",
          "春花秋月何时了？往事知多少。",
          "小楼昨夜又东风，故国不堪回首月明中。",
          "雕栏玉砌应犹在，只是朱颜改。",
          "问君能有几多愁？恰似一江春水向东流。",
          "君不见，黄河之水天上来，奔流到海不复回。",
          "君不见，高堂明镜悲白发，朝如青丝暮成雪。",
          "人生得意须尽欢，莫使金樽空对月。",
          "天生我材必有用，千金散尽还复来。",
          "烹羊宰牛且为乐，会须一饮三百杯。",
          "岑夫子，丹丘生，将进酒，杯莫停。",
          "与君歌一曲，请君为我倾耳听。",
          "钟鼓馔玉不足贵，但愿长醉不愿醒。",
          "古来圣贤皆寂寞，惟有饮者留其名。",
          "陈王昔时宴平乐，斗酒十千恣欢谑。",
          "主人何为言少钱，径须沽取对君酌。",
          "五花马，千金裘，呼儿将出换美酒，与尔同销万古愁。",
          "胜日寻芳泗水滨，无边光景一时新。",
          "等闲识得东风面，万紫千红总是春。",
          "横看成岭侧成峰，远近高低各不同。",
          "不识庐山真面目，只缘身在此山中。",
          "两个黄鹂鸣翠柳，一行白鹭上青天。",
          "窗含西岭千秋雪，门泊东吴万里船。",
          "春眠不觉晓，处处闻啼鸟。",
          "夜来风雨声，花落知多少。",
          "碧玉妆成一树高，万条垂下绿丝绦。",
          "不知细叶谁裁出，二月春风似剪刀。",
          "独在异乡为异客，每逢佳节倍思亲。",
          "遥知兄弟登高处，遍插茱萸少一人。",
          "故人西辞黄鹤楼，烟花三月下扬州。",
          "孤帆远影碧空尽，唯见长江天际流。",
          "床前明月光，疑是地上霜。",
          "举头望明月，低头思故乡。",
          "千山鸟飞绝，万径人踪灭。",
          "孤舟蓑笠翁，独钓寒江雪。",
          "春种一粒粟，秋收万颗子。",
          "四海无闲田，农夫犹饿死。",
          "锄禾日当午，汗滴禾下土。",
          "谁知盘中餐，粒粒皆辛苦。",
          "朝辞白帝彩云间，千里江陵一日还。",
          "两岸猿声啼不住，轻舟已过万重山。",
          "日照香炉生紫烟，遥看瀑布挂前川。",
          "飞流直下三千尺，疑是银河落九天。",
          "月落乌啼霜满天，江枫渔火对愁眠。",
          "姑苏城外寒山寺，夜半钟声到客船。",
          "好雨知时节，当春乃发生。",
          "随风潜入夜，润物细无声。",
          "野径云俱黑，江船火独明。",
          "晓看红湿处，花重锦官城。",
          "寒雨连江夜入吴，平明送客楚山孤。",
          "洛阳亲友如相问，一片冰心在玉壶。",
          "松下问童子，言师采药去。",
          "只在此山中，云深不知处。",
          "空山不见人，但闻人语响。",
          "返景入深林，复照青苔上。",
          "明时节雨纷纷，路上行人欲断魂。",
          "借问酒家何处有？牧童遥指杏花村。",
          "胜日寻芳泗水滨，无边光景一时新。",
          "等闲识得东风面，万紫千红总是春。",
          "泉眼无声惜细流，树阴照水爱晴柔。",
          "小荷才露尖尖角，早有蜻蜓立上头。",
          "李白乘舟将欲行，忽闻岸上踏歌声。",
          "桃花潭水深千尺，不及汪伦送我情。",
          "爆竹声中一岁除，春风送暖入屠苏。",
          "千门万户曈曈日，总把新桃换旧符。",
          "解落三秋叶，能开二月花。",
          "过江千尺浪，入竹万竿斜。",
          "慈母手中线，游子身上衣。",
          "临行密密缝，意恐迟迟归。",
          "谁言寸草心，报得三春晖。",
          "京口瓜洲一水间，钟山只隔数重山。",
          "春风又绿江南岸，明月何时照我还？",
          "千里黄云白日曛，北风吹雁雪纷纷",
          "。莫愁前路无知己，天下谁人不识君？",
          "六翮飘飖私自怜，一离京洛十余年。",
          "丈夫贫贱应未足，今日相逢无酒钱。",
          "远上寒山石径斜，白云生处有人家。",
          "停车坐爱枫林晚，霜叶红于二月花。",
          "横看成岭侧成峰，远近高低各不同。",
          "不识庐山真面目，只缘身在此山中。",
          "草长莺飞二月天，拂堤杨柳醉春烟。",
          "儿童散学归来早，忙趁东风放纸鸢。",
          "毕竟西湖六月中，风光不与四时同。",
          "接天莲叶无穷碧，映日荷花别样红。",
          "千里莺啼绿映红，水村山郭酒旗风。",
          "南朝四百八十寺，多少楼台烟雨中。",
          "渭城朝雨浥轻尘，客舍青青柳色新。",
          "劝君更尽一杯酒，西出阳关无故人。",
          "死去元知万事空，但悲不见九州同。",
          "王师北定中原日，家祭无忘告乃翁。",
          "天门中断楚江开，碧水东流至此回。",
          "两岸青山相对出，孤帆一片日边来。",
          "咬定青山不放松，立根原在破岩中。",
          "千磨万击还坚劲，任尔东西南北风。",
          "离离原上草，一岁一枯荣。",
          "野火烧不尽，春风吹又生。",
          "远芳侵古道，晴翠接荒城。",
          "又送王孙去，萋萋满别情。",
          "黑云翻墨未遮山，白雨跳珠乱入船。",
          "卷地风来忽吹散，望湖楼下水如天。",
          "生当作人杰，死亦为鬼雄。",
          "至今思项羽，不肯过江东。",
          "白日依山尽，黄河入海流。",
          "欲穷千里目，更上一层楼。",
          "江南可采莲，莲叶何田田。",
          "鱼戏莲叶间。鱼戏莲叶东，鱼戏莲叶西，鱼戏莲叶南，鱼戏莲叶北。",
          "江南好，风景旧曾谙。",
          "日出江花红胜火，春来江水绿如蓝。能不忆江南？",
          "一尺深红胜曲尘，天生旧物不如新。",
          "合欢桃核终堪恨，里许元来别有人。",
          "井底点灯深烛伊，共郎长行莫围棋。",
          "玲珑骰子安红豆，入骨相思知不知。",
          "怅卧新春白袷衣，白门寥落意多违。",
          "红楼隔雨相望冷，珠箔飘灯独自归。",
          "远路应悲春晼晚，残宵犹得梦依稀。",
          "玉珰缄札何由达，万里云罗一雁飞。",
          "鸣筝金粟柱，素手玉房前。",
          "欲得周郎顾，时时误拂弦。",
          "不写情词不写诗，一方素帕寄相思。",
          "郎君着意翻覆看，横也丝来竖也丝。",
          "相思相见知何日？此时此夜难为情！",
          "入我相思门，知我相思苦，",
          "长相思兮长相忆，短相思兮无穷极，",
          "早知如此绊人心，何如当初莫相识。",
          "枫叶千枝复万枝，江桥掩映暮帆迟。",
          "忆君心似西江水，日夜东流无歇时。",
          "彩袖殷勤捧玉钟。当年拚却醉颜红。",
          "舞低杨柳楼心月，歌尽桃花扇底风。",
          "今宵剩把银釭照，犹恐相逢是梦中。",
          "碧云天，黄叶地，秋色连波，波上寒烟翠。",
          "山映斜阳天接水，芳草无情，更在斜阳外。",
          "黯乡魂，追旅思，夜夜除非，好梦留人睡。",
          "明月楼高休独倚，酒入愁肠，化作相思泪。",
          "飒飒东风细雨来，芙蓉塘外有轻雷。",
          "金蟾啮锁烧香入，玉虎牵丝汲井回。",
          "贾氏窥帘韩掾少，宓妃留枕魏王才。",
          "春心莫共花争发，一寸相思一寸灰！",
          "春山烟欲收，天淡星稀小。",
          "残月脸边明，别泪临清晓。",
          "语已多，情未了，回首犹重道：",
          "记得绿罗裙，处处怜芳草。",
          "有一美人兮，见之不忘。",
          "一日不见兮，思之如狂。",
          "凤飞翱翔兮，四海求凰。",
          "无奈佳人兮，不在东墙。",
          "将琴代语兮，聊写衷肠。",
          "何日见许兮，慰我彷徨。",
          "愿言配德兮，携手相将。",
          "不得於飞兮，使我沦亡。",
          "君似明月我似雾，雾随月隐空留露。",
          "君善抚琴我善舞，曲终人离心若堵。",
          "只缘感君一回顾，使我思君朝与暮。",
          "魂随君去终不悔，绵绵相思为君苦。",
          "相思苦，凭谁诉？遥遥不知君何处。",
          "扶门切思君之嘱，登高望断天涯路。",
          "菱叶萦波荷飐风，荷花深处小船通。",
          "逢郎欲语低头笑，碧玉搔头落水中。",
          "车遥遥，马憧憧。",
          "游东山东复东，安得奋飞逐西风。",
          "愿我如星君如月，夜夜流光相皎洁。",
          "月暂晦，星常明。",
          "留明待月复，三五共盈盈。",
          "我住长江头，君住长江尾。",
          "日日思君不见君，共饮长江水。",
          "此水几时休，此恨何时已。",
          "只愿君心似我心，定不负相思意。",
          "临别殷勤重寄词，词中有誓两心知。",
          "七月七日长生殿，夜半无人私语时。",
          "借问吹箫向紫烟，曾经学舞度芳年。",
          "得成比目何辞死，愿作鸳鸯不羡仙。",
          "击鼓其镗，踊跃用兵。土国城漕，我独南行。",
          "从孙子仲，平陈与宋。不我以归，忧心有忡。",
          "爰居爰处？爰丧其马？于以求之？于林之下。",
          "死生契阔，与子成说。执子之手，与子偕老。",
          "于嗟阔兮，不我活兮。于嗟洵兮，不我信兮。",
          "皑如山上雪，皎若云间月。",
          "闻君有两意，故来相决绝。",
          "今日斗酒会，明旦沟水头。",
          "躞蹀御沟上，沟水东西流。",
          "凄凄复凄凄，嫁娶不须啼。",
          "愿得一心人，白头不相离。",
          "竹竿何袅袅，鱼尾何簁簁！",
          "男儿重意气，何用钱刀为！",
          "曾经沧海难为水，除却巫山不是云。",
          "取次花丛懒回顾，半缘修道半缘君。",
          "君当作磐石，妾当作蒲苇。",
          "蒲苇纫如丝，磐石无转移。",
          "问世间，情为何物，直教生死相许？",
          "天南地北双飞客，老翅几回寒暑。",
          "欢乐趣，离别苦，就中更有痴儿女。",
          "惜春更把残红折。雨轻风色暴，梅子青时节。",
          "莫把幺弦拨。怨极弦能说。",
          "天不老，情难绝。",
          "心似双丝网，中有千千结。",
          "夜过也，东窗未白凝残月。",
          "我欲与君相知，长命无绝衰。"
        ],
        a = 2,g = 1,s = 5,d = 75,
        b = ["rgb(110,64,170)", "rgb(150,61,179)", "rgb(191,60,175)", "rgb(228,65,157)", "rgb(254,75,131)", "rgb(255,94,99)", "rgb(255,120,71)", "rgb(251,150,51)", "rgb(226,183,47)", "rgb(198,214,60)", "rgb(175,240,91)", "rgb(127,246,88)", "rgb(82,246,103)", "rgb(48,239,130)", "rgb(29,223,163)", "rgb(26,199,194)", "rgb(35,171,216)", "rgb(54,140,225)", "rgb(76,110,219)", "rgb(96,84,200)"],
        c = {text: "",prefixP: -s,skillI: 0,skillP: 0,direction: "forward",delay: a,step: g};
      //填充数据进数组
      // function replaceText(data) {
      //   //o = [data.cn].map(function (r) { return r + "" });
      //   o.push(data.cn)
      // }
      i()


    };
    colortap(document.getElementById('colortap1'));
  },

  methods: {

  }
};
</script>
<style scoped>
.tprinter {
  text-align: center;
}
</style>
